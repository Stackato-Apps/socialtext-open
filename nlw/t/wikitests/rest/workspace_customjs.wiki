Tests to verify that the "customjs_uri" for a Workspace can be manipulated via the ReST API

Needed for integration with Lotus Connections; the "LC->ST Connector" that IBM developed makes use of this.

* Fixture: SocialRest

| standard-test-setup |
| set | wksp | workspace_%%start_time%% |

| *Comment* | Create Workspace with customjs_uri                            |                               |                                                                                          |
| st-admin  | give-accounts-admin --email %%username%%                      | now has                       |                                                                                          |
| POST      | /data/workspaces                                              | Content-Type=application/json | { "name":"%%wksp%%", "title":"%%wksp%%", "account_id":"1", "customjs_uri":"/monkey.js" } |
| code-is   | 201                                                           |                               |                                                                                          |
| GET       | /data/workspaces/%%wksp%%                                     | application/json              |                                                                                          |
| code-is   | 200                                                           |                               |                                                                                          |
| body-like | "customjs_uri":"/monkey.js"                                   |                               |                                                                                          |
| *comment* | ... and verify that it shows up on pages in WS                |                               |                                                                                          |
| GET       | /%%wksp%%/advanced_getting_around                   |                               |                                                                                          |
| code-is   | 200                                                           |                               |                                                                                          |
| body-like | /monkey.js                                                    |                               |                                                                                          |

| *Comment* | Unset/clear customjs_uri for Workspace (e.g. "can it be cleared?") |                               |                       |
| st-admin  | remove-accounts-admin --email %%username%%                         | no longer                     |                       |
| st-admin  | give-system-admin --email %%username%%                             | now has                       |                       |
| PUT       | /data/workspaces/%%wksp%%                                          | Content-Type=application/json | { "customjs_uri":"" } |
| code-is   | 204                                                                |                               |                       |
| GET       | /data/workspaces/%%wksp%%                                          | application/json              |                       |
| code-is   | 200                                                                |                               |                       |
| body-like | "customjs_uri":""                                                  |                               |                       |

| *Comment* | Update customjs_uri for Workspace as System Admin is ok |                               |                                   |
| st-admin  | remove-accounts-admin --email %%username%%              | no longer                     |                                   |
| st-admin  | give-system-admin --email %%username%%                  | now has                       |                                   |
| PUT       | /data/workspaces/%%wksp%%                               | Content-Type=application/json | { "customjs_uri":"/sysadmin.js" } |
| code-is   | 204                                                     |                               |                                   |
| GET       | /data/workspaces/%%wksp%%                               | application/json              |                                   |
| code-is   | 200                                                     |                               |                                   |
| body-like | "customjs_uri":"/sysadmin.js"                           |                               |                                   |

| *Comment* | Update customjs_uri for Workspace as Accounts Admin is ok |                               |                                  |
| st-admin  | give-accounts-admin --email %%username%%                  | now has                       |                                  |
| st-admin  | remove-system-admin --email %%username%%                  | no longer                     |                                  |
| PUT       | /data/workspaces/%%wksp%%                                 | Content-Type=application/json | { "customjs_uri":"/account.js" } |
| code-is   | 204                                                       |                               |                                  |
| GET       | /data/workspaces/%%wksp%%                                 | application/json              |                                  |
| code-is   | 200                                                       |                               |                                  |
| body-like | "customjs_uri":"/account.js"                              |                               |                                  |

| *Comment* | Update customjs_uri for Workspace as Workspace Admin is ok |                               |                                   |
| st-admin  | remove-accounts-admin --email %%username%%                 | no longer                     |                                   |
| st-admin  | remove-system-admin --email %%username%%                   | no longer                     |                                   |
| PUT       | /data/workspaces/%%wksp%%                                  | Content-Type=application/json | { "customjs_uri":"/ws_admin.js" } |
| code-is   | 204                                                        |                               |                                   |
| GET       | /data/workspaces/%%wksp%%                                  | application/json              |                                   |
| code-is   | 200                                                        |                               |                                   |
| body-like | "customjs_uri":"/ws_admin.js"                              |                               |                                   |

| *Comment* | Update customjs_uri for Workspace as Member fails                |                               |                                   |
| st-admin  | remove-accounts-admin --email %%username%%                       | no longer                     |                                   |
| st-admin  | remove-system-admin --email %%username%%                         | no longer                     |                                   |
| st-admin  | remove-workspace-admin --email %%username%% --workspace %%wksp%% | no longer                     |                                   |
| PUT       | /data/workspaces/%%wksp%%                                        | Content-Type=application/json | { "customjs_uri":"/ws_admin.js" } |
| code-is   | 403                                                              |                               |                                   |

| *Comment* | Update customjs_uri for Workspace as non-Member fails   |                               |                                   |
| st-admin  | remove-accounts-admin --email %%username%%              | no longer                     |                                   |
| st-admin  | remove-system-admin --email %%username%%                | no longer                     |                                   |
| st-admin  | remove-member --email %%username%% --workspace %%wksp%% | no longer                     |                                   |
| PUT       | /data/workspaces/%%wksp%%                               | Content-Type=application/json | { "customjs_uri":"/ws_admin.js" } |
| code-is   | 403                                                     |                               |                                   |
