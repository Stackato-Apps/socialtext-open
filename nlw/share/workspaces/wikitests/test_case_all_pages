| *Comment* | Test Case: All Pages |  |

| set | new_ws | all-pages-%%start_time%% |
| st-admin | create-workspace --empty --name %%new_ws%% --title %%new_ws%% --empty |  |
| st-admin | add-member --email %%email%% --workspace %%new_ws%% |  |

| st-admin | update-page --email %%email%% --workspace %%new_ws%% --page "allpages 0001%%start_time%%" < %%wikitest_client_files%%wikitest.txt | The "allpages 0001%%start_time%%" page has been created. |
| st-admin | update-page --email %%email%% --workspace %%new_ws%% --page "allpages 0002%%start_time%%" < %%wikitest_client_files%%wikitest.txt | The "allpages 0002%%start_time%%" page has been created. |
| st-admin | update-page --email %%email%% --workspace %%new_ws%% --page "allpages 0003%%start_time%%" < %%wikitest_client_files%%wikitest.txt | The "allpages 0003%%start_time%%" page has been created. |
| st-admin | update-page --email %%email%% --workspace %%new_ws%% --page "allpages 0004%%start_time%%" < %%wikitest_client_files%%wikitest.txt | The "allpages 0004%%start_time%%" page has been created. |

| *Comment* | Test Case: All Pages name sorting |  |
| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |

| text_like | contentContainer | All Pages |
| text_like | contentContainer | Showing 1 - 4 of 4 |
| click_and_wait | link=allpages 0001%%start_time%% |  |
| text_like | st-page-titletext | allpages 0001%%start_time%% |

| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Title |
| text_like | contentContainer | qr/allpages 0001%%start_time%%.+allpages 0004%%start_time%%/ |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Title (↓) |
| text_like | contentContainer | qr/allpages 0004%%start_time%%.+allpages 0001%%start_time%%/ |

| *Comment* | Test Case: All Pages add a new page |  |
| st-admin | update-page --email %%email%% --workspace %%new_ws%% --page "allpages 0005%%start_time%%" < %%wikitest_client_files%%wikitest.txt | The "allpages 0005%%start_time%%" page has been created. |
| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | Revisions |

| *Comment* | Test Case: All Pages reopen. Date sort. |  |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Date Last Edited |
| text_like | contentContainer | qr/allpages 0005%%start_time%%.+allpages 0004%%start_time%%/ |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Date Last Edited (↑) |
| text_like | contentContainer | qr/allpages 0004%%start_time%%.+allpages 0005%%start_time%%/ |

| *Comment* | Test Case: All Pages revision sort |  |
| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |
| click_and_wait | link=allpages 0004%%start_time%% |  |

| wait_for_element_visible_ok | st-edit-button-link |  |
| click_ok | st-edit-button-link |  |
| wait_for_element_visible_ok | st-save-button-link |  |
| pause | 5000 | I hate pause; needed for entire page load |
| st-page-save |  |  |
| wait_for_element_visible_ok | st-edit-button-link |  |

| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Revisions |
| text_like | contentContainer | qr/allpages 0004%%start_time%%.+allpages 0003%%start_time%%/ |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Revisions (↑) |
| text_like | contentContainer | qr/allpages 0003%%start_time%%.+allpages 0004%%start_time%%/ |

| *Comment* | Test Case: All Pages sort by Last Edited By |  |

create a user that lexically precedes the logged in user by creating a user that begins with start_time
However, don't use %%email%% in that username because that permanently creates another user name in the user DB that
contains %%email%% as a substring and that messes up other tests like Test Case: Email

| set | s_user | %%start_time%%@%%start_time%%.socialtext.net |

| st-admin | create-user --email %%s_user%% --password 123456 |  |
| st-admin | add-member --email %%s_user%% --workspace %%new_ws%% |  |
| st-logout |  |  |
| st-login | %%s_user%% | 123456 |

For some reason, IE 6 blows up when open_ok is used in some places. We avoid it.

| *Comment* | Test Case: All Pages revision by new user |  |
| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |
| click_and_wait | link=allpages 0003%%start_time%% |  |
| wait_for_element_visible_ok | st-edit-button-link |  |
| click_ok | st-edit-button-link |  |
| wait_for_element_visible_ok | st-save-button-link |  |
| pause | 5000 | I hate pause; needed for entire page load |
| st-page-save |  |  |
| wait_for_element_visible_ok | st-edit-button-link |  |

| *Comment* | Test Case: All Pages verify revision by user %%s_user%% |  |

| open_ok | /%%new_ws%%/index.cgi?action=changes&changes=all |  |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Last Edited By |
| text_like | contentContainer | qr/allpages 0003%%start_time%%.+allpages 0001%%start_time%%/ |
| wait_for_element_visible_ok | sort-picker | 30000 |
| select_and_wait | sort-picker | label=Last Edited By (↓) |
| text_like | contentContainer | qr/allpages 0001%%start_time%%.+allpages 0003%%start_time%%/ |

| *Comment* | Test Case: All Pages Teardown. No need to login again. |  |

| st-admin | delete-workspace --workspace %%new_ws%% --no-export | has been deleted |

| *Comment* | Test Case: All Pages COMPLETED |  |
