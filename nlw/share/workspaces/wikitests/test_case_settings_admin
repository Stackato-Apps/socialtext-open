| *Comment* | Test Case: Settings: Admin |

| set | user | admin.user.%%start_time%%@david.socialtext.net |  |
| create-user | %%user%% | %%password%% | %%hostname%% |

| *Comment* | Test Case: Settings: Admin make sure user is an admin |  |
| st-admin | add-account-admin --email %%user%% --account %%hostname%% |  |
| st-admin | add-workspace-admin --email %%user%% --workspace %%workspace%% |  |
| st-admin | set-workspace-config --w %%workspace%% email_notify_is_enabled 1 | has been updated |

| *Comment* | Test Case: Settings: Admin verify content of settings menu |  |
| click_and_wait | link=Settings |  |
| text_like | contentLeft | My Settings |
| text_like | contentLeft | Manage All Users |
| text_like | contentLeft | Invite New Users |
| text_like | contentLeft | My Workspaces |
| text_like | contentLeft | Unsubscribe |
| text_like | contentLeft | Workspace Appearance |
| text_like | contentLeft | Workspace Features |
| text_like | contentLeft | Workspace Privacy |
| text_like | contentLeft | Create New Blog |
| text_like | contentLeft | Page Editing |
| text_like | contentLeft | Screen Layout |
| text_like | contentLeft | Email Notification |
| text_like | contentLeft | Your Notepad |
| text_like | contentLeft | What's New |
| text_like | contentLeft | Syndicate |
| text_like | contentLeft | Watchlist |
| text_like | contentLeft | Blogs |
| text_unlike | contentLeft | List All Users |

| *Comment* | Test Case: Settings: Admin test Invite New Users functionality |  |
| click_and_wait | link=Settings |  |
| click_and_wait | link=Invite New Users |  |
| type_ok | users_new_ids | invite_%%start_time%%@ken.socialtext.net |
| text_like | contentContainer | If you wish, you can include a personal message |
| click_and_wait | link=Invite |  |
| st-logoutin | invite_%%start_time%%@ken.socialtext.net |  |
| text_like | errors-and-messages | You need to confirm |
| st-admin | confirm-user --email invite_%%start_time%%@ken.socialtext.net --password 123456 |
| st-login |  |  |

| *Comment* | Test Case: Settings: Admin test Manage All Users functionality |  |
| click_and_wait | link=Settings |  |
| click_and_wait | link=Manage All Users |  |
| text_like | contentContainer | invite_%%start_time%%@ken.socialtext.net |
| st-should-be-admin | invite_%%start_time%%@ken.socialtext.net | 1 |
| st-logoutin | invite_%%start_time%%@ken.socialtext.net | 123456 |
| text_like | workspaceNav | Add Members |
| st-logoutin |  |  |

| *Comment* | Test Case: Settings: Admin test Workspace Appearance using newspace-%%start_time%% |  |
| st-admin | create-workspace --empty --title "Newspace %%start_time%%" --name newspace-%%start_time%% | was created |
| st-admin | add-member --workspace newspace-%%start_time%% --e %%username%% | now has the role of |
| st-admin | add-workspace-admin --workspace newspace-%%start_time%% --e %%username%% | now has the role of |
| open_ok | /newspace-%%start_time%% |  |
| click_and_wait | link=Settings |  |
| click_and_wait | link=Workspace Appearance |  |
| text_like | contentContainer | When users click |
| text_like | contentContainer | This is the title of your workspace |
| type_ok | title | New Title %%start_time%% |
| click_and_wait | link=Save |  |
| open_ok | /newspace-%%start_time%% |  |
| location_like | /newspace-%%start_time%%/New%20Title%20%%start_time%% |  |

| *Comment* | Test Case: Settings: Admin test Workspace Features using newspace-%%start_time%% |  |
| *Comment* | Test Case: Settings: Admin set up testing weblog |  |
| open_ok | /?action=preferences_settings;preferences_class_id=timezone |  |
| check_ok | timezone__time_display_seconds |  |
| click_and_wait | link=Save |  |
| open_ok | /newspace-%%start_time%%/?action=users_settings |  |
| click_and_wait | link=Create New Blog |  |
| type_ok | weblog_title | %%start_time%% Blog |
| click_and_wait | link=Save |  |

| wait_for_text_present_ok | New Post | 30000 |
| wait_for_element_visible_ok | st-weblog-newpost-button | 30000 |
| click_and_wait | st-weblog-newpost-button |  |
| wait_for_element_visible_ok | link=Wiki Text | 30000 |
| click_ok | link=Wiki Text |  |
| wait_for_element_visible_ok | st-newpage-pagename-edit | 30000 |
| type_ok | st-newpage-pagename-edit | post2 %%start_time%% |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 30000 |
| type_ok | wikiwyg_wikitext_textarea | post2 %%start_time%% content |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| st-pause-click | 2000 | st-save-button-link |

| *Comment* | Test Case: Settings: Admin test weblog sort order using newspace-%%start_time%% |  |
| wait_for_text_present_ok | Blog: %%start_time%% Blog | 30000 |
| text_like | contentContainer | qr/post2 %%start_time%%.+first post/ |
| open_ok | /newspace-%%start_time%%/index.cgi?action=display;page_name=first_post_in_%%start_time%%_blog;caller_action=blog_display;category=%%start_time%%_blog;js=show_edit_div#edit |  |
| wait_for_element_visible_ok | link=Wiki Text | 30000 |
| click_ok | link=Wiki Text |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 30000 |
| type_ok | wikiwyg_wikitext_textarea | Editing the content of First Post in %%start_time%% Blog |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| st-pause-click | 2000 | st-save-button-link |


| wait_for_text_present_ok | Blog: %%start_time%% Blog | 30000 |
| text_like | contentContainer | qr/ First Post in %%start_time%% Blog.+post2 %%start_time%%/ |
| click_and_wait | link=Settings |  |
| click_and_wait | link=Workspace Features |  |
| click_ok | document.forms[1].sort_weblogs_by_create[1] |  |
| click_and_wait | link=Save |  |

| click_and_wait | link=Blogs |  |
| wait_for_text_present_ok | Blog: %%start_time%% Blog | 30000 |
| text_like | contentContainer | qr/post2 %%start_time%%.+First Post in %%start_time%% Blog/ |
| click_and_wait | link=Settings |  |
| click_and_wait | link=Workspace Features |  |
| click_ok | document.forms[1].sort_weblogs_by_create[0] |  |
| click_and_wait | link=Save |  |
| open_ok | /?action=preferences_settings;preferences_class_id=timezone |  |
| wait_for_element_visible_ok | timezone__time_display_seconds | 30000 |
| uncheck_ok | timezone__time_display_seconds |  |
| click_and_wait | link=Save |  |

*Privacy features, Create new Workspace and workspace skin are tested in separate test cases.*

| *Comment* | Test Case: Settings: Admin TEARDOWN |  |
| st-process-jobs | PageIndex | newspace-%%start_time%% |
| st-admin | delete-workspace --workspace newspace-%%start_time%% --no-export | has been deleted |
| st-admin | remove-member --email invite_%%start_time%%@ken.socialtext.net --workspace %%workspace%% |  |
| deactivate-user | %%user%% |  |

| *Comment* | Test Case: Settings: Admin COMPLETED |
